{"ast":null,"code":"import _regeneratorRuntime from \"/Users/estebanmendez/Desktop/style_me_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/estebanmendez/Desktop/style_me_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"/Users/estebanmendez/Desktop/style_me_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"/Users/estebanmendez/Desktop/style_me_react/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/Users/estebanmendez/Desktop/style_me_react/client/src/pages/new_item.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext, Fragment } from \"react\";\nimport Header from \"../components/Header\";\nimport CloudinaryButton from \"../components/Cloudinary_Button\";\nimport ImagePlaceholder from \"../components/Image_placeholder\";\nimport { Input, LabelForInput } from \"../components/Form\";\nimport { ReusableBtn } from \"../components/Buttons\";\nimport { Select } from \"../components/DropdownLists\";\nimport PlaceholderGray2 from \"../images/PlaceholderGray2.png\";\nimport Footer from \"../components/Footer\";\nimport { CloudinaryContext, Image } from \"cloudinary-react\";\nimport { openUploadWidget } from \"../utils/CloudinaryService\";\nimport API from \"../utils/API\";\nimport UserContext from \"../utils/UserContext\";\nimport { Redirect } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction New_item() {\n  _s();\n\n  var _this = this;\n\n  var _useContext = useContext(UserContext),\n      loggedIn = _useContext.loggedIn;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      images = _useState2[0],\n      setImages = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      itemName = _useState4[0],\n      setItemName = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      url = _useState6[0],\n      setUrl = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      thumbnailUrl = _useState8[0],\n      setThumbnailUrl = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      type = _useState10[0],\n      setType = _useState10[1];\n\n  var _useState11 = useState(true),\n      _useState12 = _slicedToArray(_useState11, 2),\n      prediction = _useState12[0],\n      setPrediction = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      categories = _useState14[0],\n      setCategories = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      categoryId = _useState16[0],\n      setCategoryId = _useState16[1];\n\n  console.log(loggedIn);\n  useEffect(function () {\n    loadCategories();\n  }, []);\n\n  function loadCategories() {\n    API.getCategories().then(function (res) {\n      // console.log(res);\n      // console.log(res.data);\n      setCategories(_toConsumableArray(res.data));\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  } //console.log(categories);\n\n\n  var beginUpload = function beginUpload(tag) {\n    var uploadOptions = {\n      cloudName: \"dnx8v0ryu\",\n      tags: [tag],\n      uploadPreset: \"qvqp5qcx\"\n    };\n    openUploadWidget(uploadOptions, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(error, photos) {\n        var _prediction;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (error) {\n                  _context.next = 11;\n                  break;\n                }\n\n                if (!(photos.event === \"success\")) {\n                  _context.next = 9;\n                  break;\n                }\n\n                setImages([].concat(_toConsumableArray(images), [photos.info.public_id])); //console.log(\"URL\", photos.info.url);\n                //console.log(\"THUMBNAIL_URL\", photos.info.thumbnail_url);\n\n                _context.next = 5;\n                return API.getPrediction(photos.info.url);\n\n              case 5:\n                _prediction = _context.sent;\n                //console.log(prediction.data.type);\n                setUrl(photos.info.url);\n                setThumbnailUrl(photos.info.thumbnail_url);\n                setType(_prediction.data.type);\n\n              case 9:\n                _context.next = 12;\n                break;\n\n              case 11:\n                console.log(error);\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x, _x2) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }; // Handles updating component state when the user types into the input field\n\n\n  function handleInputChange(event) {\n    var value = event.target.value; // console.log(value);\n\n    setItemName(value);\n  } // If setPrediction is true, then keep the returned setType\n  // if setPrediction is false, then grab the value of an option\n  //  inside the dropdownlist and return that value as\n  //  the new setType.\n\n\n  function categoryType(event) {\n    event.preventDefault();\n\n    if (event.target.innerHTML === \"YES\") {\n      prediction = true;\n      console.log(prediction);\n      var categoryID = categories.filter(function (category) {\n        return category.category_name === type;\n      });\n      console.log(categoryID[0].id);\n      setCategoryId(categoryID[0].id);\n      document.querySelector(\".questionToTheUser\").style.display = \"\";\n      document.querySelector(\".predictionBtn\").style.borderStyle = \"solid\";\n      setPrediction(prediction);\n    } else if (event.target.innerHTML === \"NO\") {\n      prediction = false;\n      console.log(prediction);\n      setPrediction(prediction);\n      setCategoryId(categoryId);\n      document.querySelector(\".questionToTheUser\").style.display = \"none\";\n      document.querySelector(\".predictionBtn\").style.borderStyle = \"none\";\n    }\n  } // handles the category options the user chooses from the dropdown list\n\n\n  function handleDropdownOptions(event) {\n    var selectCategory = event.target.value;\n    var categoryID = categories.filter(function (category) {\n      return category.category_name === selectCategory;\n    });\n    setCategoryId(categoryID[0].id);\n    console.log(categoryID);\n    console.log(selectCategory);\n    setType(selectCategory);\n  } // When the item name is submitted, use the API.saveItem method to save the item data\n\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    console.log(url, thumbnailUrl, type, prediction, itemName);\n    API.saveItem({\n      url: url,\n      thumbnail: thumbnailUrl,\n      categoryId: categoryId,\n      prediction: prediction,\n      itemName: itemName,\n      userId: 1\n    }).then(function (res) {\n      return console.log(res);\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: function () {\n      if (loggedIn) {\n        return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(CloudinaryContext, {\n            cloudName: \"dnx8v0ryu\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"App\",\n              children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"topButtons\",\n                children: [/*#__PURE__*/_jsxDEV(ReusableBtn, {\n                  to: \"/catalogs\",\n                  className: \"seeCatalogsBtn btn btn-outline-secondary\",\n                  children: \"See Catalogs\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 21\n                }, _this), /*#__PURE__*/_jsxDEV(ReusableBtn, {\n                  to: \"/buildoutfit\",\n                  className: \"buildoutfitBtn btn btn-outline-secondary\",\n                  children: \"Build Outfit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 21\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(CloudinaryButton, {\n                onClick: function onClick() {\n                  return beginUpload(\"image\");\n                },\n                className: \"upload_widget\",\n                children: \"Add New Item\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  marginTop: \"15px\",\n                  marginBottom: \"20px\"\n                },\n                children: images.length <= 0 ? /*#__PURE__*/_jsxDEV(ImagePlaceholder, {\n                  className: \"img\",\n                  src: PlaceholderGray2,\n                  style: {\n                    maxWidth: \"60%\",\n                    maxHeight: \"60%\"\n                  },\n                  alt: \"placeholder\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 168,\n                  columnNumber: 23\n                }, _this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"predictionBtn\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"questionToTheUser\",\n                      children: [\"Category: **\", type, \"**\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 180,\n                        columnNumber: 29\n                      }, _this), \"Would you like to keep this category?\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn truePredictionBtn\",\n                      onClick: categoryType,\n                      children: \"YES\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 184,\n                      columnNumber: 27\n                    }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn falsePredictionBtn\",\n                      onClick: categoryType,\n                      children: \"NO\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 191,\n                      columnNumber: 27\n                    }, _this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 25\n                  }, _this), prediction === false && /*#__PURE__*/_jsxDEV(_Fragment, {\n                    children: [/*#__PURE__*/_jsxDEV(LabelForInput, {\n                      style: {\n                        textDecoration: \"none\",\n                        color: \"#6c757d\",\n                        fontSize: \"20px\",\n                        marginRight: \"10px\"\n                      },\n                      children: \"Choose a category:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 201,\n                      columnNumber: 29\n                    }, _this), /*#__PURE__*/_jsxDEV(Select, {\n                      className: \"dropdownList\",\n                      style: {\n                        marginBottom: \"30px\"\n                      },\n                      onChange: handleDropdownOptions,\n                      children: categories.map(function (category) {\n                        return /*#__PURE__*/_jsxDEV(\"option\", {\n                          value: category.category_name,\n                          children: category.category_name\n                        }, category.id, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 218,\n                          columnNumber: 33\n                        }, _this);\n                      })\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 211,\n                      columnNumber: 29\n                    }, _this)]\n                  }, void 0, true), /*#__PURE__*/_jsxDEV(\"section\", {\n                    children: images.map(function (i) {\n                      return /*#__PURE__*/_jsxDEV(Image, {\n                        publicId: i,\n                        \"fetch-format\": \"auto\",\n                        quality: \"auto\",\n                        style: {\n                          height: \"60%\",\n                          width: \"60%\"\n                        }\n                      }, i, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 233,\n                        columnNumber: 29\n                      }, _this);\n                    })\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 231,\n                    columnNumber: 25\n                  }, _this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"inputItemName\",\n                children: /*#__PURE__*/_jsxDEV(Input, {\n                  onChange: handleInputChange,\n                  id: \"item_name\",\n                  className: \"itemName\",\n                  name: \"Item_name\",\n                  placeholder: \"Item Name\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 21\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(ReusableBtn, {\n                id: \"addToCollection_Btn\",\n                className: \"addToCollectionBtn reusableBtn\",\n                type: \"submit\",\n                onClick: handleSubmit,\n                children: \"Add To Collection\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 19\n              }, _this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 19\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, _this)\n        }, void 0, false);\n      } else {\n        console.log(\"is this even working\");\n\n        /*#__PURE__*/\n        _jsxDEV(Redirect, {\n          to: \"/login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 10\n        }, _this);\n      }\n    }()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 5\n  }, this);\n}\n\n_s(New_item, \"xbUPo9EsZfxYW9CvTTMj1objQvE=\");\n\n_c = New_item;\nexport default New_item;\n\nvar _c;\n\n$RefreshReg$(_c, \"New_item\");","map":{"version":3,"sources":["/Users/estebanmendez/Desktop/style_me_react/client/src/pages/new_item.js"],"names":["React","useEffect","useState","useContext","Fragment","Header","CloudinaryButton","ImagePlaceholder","Input","LabelForInput","ReusableBtn","Select","PlaceholderGray2","Footer","CloudinaryContext","Image","openUploadWidget","API","UserContext","Redirect","New_item","loggedIn","images","setImages","itemName","setItemName","url","setUrl","thumbnailUrl","setThumbnailUrl","type","setType","prediction","setPrediction","categories","setCategories","categoryId","setCategoryId","console","log","loadCategories","getCategories","then","res","data","catch","err","beginUpload","tag","uploadOptions","cloudName","tags","uploadPreset","error","photos","event","info","public_id","getPrediction","thumbnail_url","handleInputChange","value","target","categoryType","preventDefault","innerHTML","categoryID","filter","category","category_name","id","document","querySelector","style","display","borderStyle","handleDropdownOptions","selectCategory","handleSubmit","saveItem","thumbnail","userId","marginTop","marginBottom","length","maxWidth","maxHeight","textDecoration","color","fontSize","marginRight","map","i","height","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useContext, Fragment } from \"react\";\nimport Header from \"../components/Header\";\nimport CloudinaryButton from \"../components/Cloudinary_Button\";\nimport ImagePlaceholder from \"../components/Image_placeholder\";\nimport { Input, LabelForInput } from \"../components/Form\";\nimport { ReusableBtn } from \"../components/Buttons\";\nimport { Select } from \"../components/DropdownLists\";\nimport PlaceholderGray2 from \"../images/PlaceholderGray2.png\";\nimport Footer from \"../components/Footer\";\nimport { CloudinaryContext, Image } from \"cloudinary-react\";\nimport { openUploadWidget } from \"../utils/CloudinaryService\";\nimport API from \"../utils/API\";\nimport UserContext from \"../utils/UserContext\";\nimport { Redirect } from \"react-router-dom\";\n\nfunction New_item() {\n  const { loggedIn } = useContext(UserContext);\n  const [images, setImages] = useState([]);\n  const [itemName, setItemName] = useState(\"\");\n  const [url, setUrl] = useState(\"\");\n  const [thumbnailUrl, setThumbnailUrl] = useState(\"\");\n  const [type, setType] = useState(\"\");\n  let [prediction, setPrediction] = useState(true);\n  const [categories, setCategories] = useState([]);\n  const [categoryId, setCategoryId] = useState(\"\");\n\n  console.log(loggedIn);\n\n  useEffect(() => {\n    loadCategories();\n  }, []);\n\n  function loadCategories() {\n    API.getCategories()\n      .then((res) => {\n        // console.log(res);\n        // console.log(res.data);\n        setCategories([...res.data]);\n      })\n      .catch((err) => console.log(err));\n  }\n\n  //console.log(categories);\n\n  const beginUpload = (tag) => {\n    const uploadOptions = {\n      cloudName: \"dnx8v0ryu\",\n      tags: [tag],\n      uploadPreset: \"qvqp5qcx\",\n    };\n\n    openUploadWidget(uploadOptions, async (error, photos) => {\n      if (!error) {\n        // console.log(photos);\n        if (photos.event === \"success\") {\n          setImages([...images, photos.info.public_id]);\n          //console.log(\"URL\", photos.info.url);\n          //console.log(\"THUMBNAIL_URL\", photos.info.thumbnail_url);\n          let prediction = await API.getPrediction(photos.info.url);\n\n          //console.log(prediction.data.type);\n          setUrl(photos.info.url);\n          setThumbnailUrl(photos.info.thumbnail_url);\n          setType(prediction.data.type);\n        }\n      } else {\n        console.log(error);\n      }\n    });\n  };\n\n  // Handles updating component state when the user types into the input field\n  function handleInputChange(event) {\n    const { value } = event.target;\n    // console.log(value);\n    setItemName(value);\n  }\n\n  // If setPrediction is true, then keep the returned setType\n  // if setPrediction is false, then grab the value of an option\n  //  inside the dropdownlist and return that value as\n  //  the new setType.\n  function categoryType(event) {\n    event.preventDefault();\n    if (event.target.innerHTML === \"YES\") {\n      prediction = true;\n      console.log(prediction);\n      var categoryID = categories.filter(\n        (category) => category.category_name === type\n      );\n      console.log(categoryID[0].id);\n      setCategoryId(categoryID[0].id);\n\n      document.querySelector(\".questionToTheUser\").style.display = \"\";\n      document.querySelector(\".predictionBtn\").style.borderStyle = \"solid\";\n      setPrediction(prediction);\n    } else if (event.target.innerHTML === \"NO\") {\n      prediction = false;\n      console.log(prediction);\n      setPrediction(prediction);\n      setCategoryId(categoryId);\n      document.querySelector(\".questionToTheUser\").style.display = \"none\";\n      document.querySelector(\".predictionBtn\").style.borderStyle = \"none\";\n    }\n  }\n\n  // handles the category options the user chooses from the dropdown list\n  function handleDropdownOptions(event) {\n    let selectCategory = event.target.value;\n\n    var categoryID = categories.filter(\n      (category) => category.category_name === selectCategory\n    );\n    setCategoryId(categoryID[0].id);\n    console.log(categoryID);\n\n    console.log(selectCategory);\n    setType(selectCategory);\n  }\n\n  // When the item name is submitted, use the API.saveItem method to save the item data\n  function handleSubmit(event) {\n    event.preventDefault();\n    console.log(url, thumbnailUrl, type, prediction, itemName);\n    API.saveItem({\n      url,\n      thumbnail: thumbnailUrl,\n      categoryId,\n      prediction,\n      itemName,\n      userId: 1,\n    })\n      .then((res) => console.log(res))\n      .catch((err) => console.log(err));\n  }\n\n  return (\n    <Fragment>\n      {(() => {\n        if (loggedIn) {\n          return (\n            <>\n              <CloudinaryContext cloudName=\"dnx8v0ryu\">\n                <div className=\"App\">\n                  <Header />\n                  <div className=\"topButtons\">\n                    <ReusableBtn\n                      to=\"/catalogs\"\n                      className=\"seeCatalogsBtn btn btn-outline-secondary\"\n                    >\n                      See Catalogs\n                    </ReusableBtn>\n                    <ReusableBtn\n                      to=\"/buildoutfit\"\n                      className=\"buildoutfitBtn btn btn-outline-secondary\"\n                    >\n                      Build Outfit\n                    </ReusableBtn>\n                  </div>\n                  <CloudinaryButton\n                    onClick={() => beginUpload(\"image\")}\n                    className=\"upload_widget\"\n                  >\n                    Add New Item\n                  </CloudinaryButton>\n                  <div style={{ marginTop: \"15px\", marginBottom: \"20px\" }}>\n                    {images.length <= 0 ? (\n                      <ImagePlaceholder\n                        className=\"img\"\n                        src={PlaceholderGray2}\n                        style={{ maxWidth: \"60%\", maxHeight: \"60%\" }}\n                        alt=\"placeholder\"\n                      />\n                    ) : (\n                      <>\n                        <div className=\"predictionBtn\">\n                          <p className=\"questionToTheUser\">\n                            Category: **{type}\n                            **\n                            <br />\n                            Would you like to keep this category?\n                          </p>\n\n                          <button\n                            className=\"btn truePredictionBtn\"\n                            onClick={categoryType}\n                          >\n                            YES\n                          </button>\n\n                          <button\n                            className=\"btn falsePredictionBtn\"\n                            onClick={categoryType}\n                          >\n                            NO\n                          </button>\n                        </div>\n\n                        {prediction === false && (\n                          <>\n                            <LabelForInput\n                              style={{\n                                textDecoration: \"none\",\n                                color: \"#6c757d\",\n                                fontSize: \"20px\",\n                                marginRight: \"10px\",\n                              }}\n                            >\n                              Choose a category:\n                            </LabelForInput>\n                            <Select\n                              className=\"dropdownList\"\n                              style={{ marginBottom: \"30px\" }}\n                              onChange={handleDropdownOptions}\n                            >\n                              {/* ======= should render all categories ====== */}\n                              {categories.map((category) => (\n                                <option\n                                  key={category.id}\n                                  value={category.category_name}\n                                >\n                                  {category.category_name}\n                                </option>\n                              ))}\n\n                              {/* ====================================== */}\n                            </Select>\n                          </>\n                        )}\n\n                        <section>\n                          {images.map((i) => (\n                            <Image\n                              key={i}\n                              publicId={i}\n                              fetch-format=\"auto\"\n                              quality=\"auto\"\n                              style={{ height: \"60%\", width: \"60%\" }}\n                            />\n                          ))}\n                        </section>\n                      </>\n                    )}\n                  </div>\n\n                  <div className=\"inputItemName\">\n                    <Input\n                      onChange={handleInputChange}\n                      id=\"item_name\"\n                      className=\"itemName\"\n                      name=\"Item_name\"\n                      placeholder=\"Item Name\"\n                    />\n                    {/* <LabelForInput htmlFor=\"item_name\" /> */}\n                  </div>\n                  <ReusableBtn\n                    id=\"addToCollection_Btn\"\n                    className=\"addToCollectionBtn reusableBtn\"\n                    type=\"submit\"\n                    onClick={handleSubmit}\n                  >\n                    Add To Collection\n                  </ReusableBtn>\n\n                  <Footer />\n                </div>\n              </CloudinaryContext>\n            </>\n          );\n        } else {\n          console.log(\"is this even working\");\n         <Redirect to=\"/login\" />\n        }\n      })()}\n    </Fragment>\n  );\n}\n\nexport default New_item;\n"]},"metadata":{},"sourceType":"module"}